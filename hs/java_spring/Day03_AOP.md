## AOP에 대해 설명해 주세요.

Spring AOP는 스프링 프레임워크에서 제공하는 기능 중 하나로 관점 지향 프로그래밍을 지원하는 기술입니다. Spring AOP는 로깅, 트랜잭션 관리 등과 같은 공통적인 관심사를 모듈화하여 중복 코드를 줄이고 유지 보수성을 향상하는 데 도움을 줍니다. 

AOP란 Aspected-Oriented Programming 의 약자로, 메소드나 객체의 기능을 핵심 관심사와 공통 관심사로 나누어 프로그래밍을 하는 것을 말합니다. 핵심 관심사는 비즈니스 로직과 관련된 기능이며 공통 관심사는 비즈니스 로직과는 별개지만 많은 코드에서 사용해야 하는 기능을 의미합니다. 각 코드에 같은 동작을 하는 코드를 넣으면 중복이 많아져 유지 보수하기 어렵기 때문에 그 부분만 떼서 모듈화 시켜 원하는 기능에만 붙여넣고 싶을 때 사용할 수 있습니다. 

__주요 용어__<br/>
| 용어        | 설명                                                                                        |
|:-------------|:---------------------------------------------------------------------------------------------|
| Aspect      | 공통적인 기능들을 모듈화 한것을 의미합니다.                                                 |
| Target      | Aspect가 적용될 대상을 의미하며 메소드, 클래스 등이 이에 해당 됩니다.                      |
| Join point  | Aspect가 적용될 수 있는 시점을 의미하며 메소드 실행 전, 후 등이 될 수 있습니다.            |
| Advice      | Aspect의 기능을 정의한 것으로 메서드의 실행 전, 후, 예외 처리 발생 시 실행되는 코드를 의미합니다. |
| Point cut   | Advice를 적용할 메소드의 범위를 지정하는 것을 의미합니다.                                 |



__주요 어노테이션__<br/>
| 메서드           | 설명                                                                                   |
|:------------------|:----------------------------------------------------------------------------------------|
| @Aspect          | 해당 클래스를 Aspect로 사용하겠다는 것을 명시합니다.                                     |
| @Before          | 대상 “메서드”가 실행되기 전에 Advice를 실행합니다.                                      |
| @AfterReturning  | 대상 “메서드”가 정상적으로 실행되고 반환된 후에 Advice를 실행합니다.                    |
| @AfterThrowing   | 대상 “메서드에서 예외가 발생”했을 때 Advice를 실행합니다.                                |
| @After           | 대상 “메서드”가 실행된 후에 Advice를 실행합니다.                                        |
| @Around          | 대상 “메서드” 실행 전, 후 또는 예외 발생 시에 Advice를 실행합니다.                     |

__사용 예시__<br/>
```java
@Aspect
@Component
public class LoggingAspect {

    @Before("execution(* com.example.service.*.*(..))")
    public void logBefore() {
        System.out.println("Method execution started");
    }
}
```

- __Aspect__ : LoggingAspect 클래스
- __Target__ : `com.example.service` 패키지 내의 모든 메서드
- __Join point__ : `com.example.service` 패키지의 메서드 실행 전 시점
- __Advice__ : 메서드 실행 전에 logBefore() 수행
- __Point cut__ : `"execution(* com.example.service.*.*(..))"` - `com.example.service` 패키지 내의 모든 클래스의 모든 메서드가 대상 


### @Aspect는 어떻게 동작하나요?
1. Spring Application Context가 스프링 컨테이너를 생성하면서 빈을 생성할 때 `@Aspect` 어노테이션이 붙은 클래스도 함께 등록됩니다. 
2. 스프링 컨테이너가 빈 인스턴스를 생성합니다. 이때 AOP 적용 대상이 되는 빈에 대한 프록시를 생성할 준비를 합니다.
3. 스프링 컨테이너는 생성된 빈에 필요한 의존성을 주입합니다.
4. 초기화 콜백이 실행됩니다. 
5. AOP 프록시를 생성합니다.
    - 스프링은 빈 후처리기를 통해 `@Aspect`가 붙은 클래스와 포인트컷 정의를 분석하고, AOP 적용 대상 빈을 식별합니다.
    - 스프링 컨테이너는 `@Aspect`의 __포인트컷에 매칭되는 빈에 대해 프록시를 생성__ 합니다. 이 단계에서 JDK 동적 프록시나 CGLIB 프록시가 사용됩니다. 
6. 클라이언트가 빈의 메서드를 호출하면, 실제 빈 인스턴스가 아닌 프록시 객체가 호출을 가로챕니다. 프록시 객체는 설정된 포인트 컷에 따라 어드바이스를 실행합니다. 

### 참고
[[Java] Spring Boot AOP(Aspect-Oriented Programming) 이해하고 설정하기
](https://adjh54.tistory.com/133)